<topbar [assessmentId]="assessmentId" [noSecondBar]="noSecondBar"></topbar>


<ion-content>
  <div class="first-bar">
    <!-- user's name -->
    <div class="user-info">
      <h1>{{fakeUser.name}}</h1>
      <div class="info">
        <!-- email -->
        <p><b>email:</b> {{fakeUser.email}}</p> |
        <!-- organization -->
        <p><b>organization:</b> {{fakeUser.organization}}</p>
      </div>
    </div>
    <div class="buttons">
      <button ion-button color="buttonBlue" small (click)="handleSettings()">Settings</button>
      <button ion-button color="buttonBlue" small (click)="redirectToCreate()">Start New Assessment</button>
    </div>
  </div>

  <!-- <div *ngIf="!this.assessments">
    <div class="no-assessments">
      <p>You don't have any assessments yet! Click here to start your first assessment</p>
    </div>
  </div> -->

  <div class="assessment-boxes">
    <div class="assessments user-assessments">
      <div class="box-title">
        <h3><b>My Assessments</b></h3>
      </div>
      <div *ngIf="this.assessments">
        <div class="accordion-tab metrics">
          <p>You currently have {{assessments.length}} assessments</p>
        </div>
      <div  *ngFor="let assessment of assessments">
        <div class="accordion-tab" (click)="expandAssessment(assessment.id)">
          <b>Assessment:</b> {{assessment.name}}
        </div>
        <div *ngIf="currentAssessment == assessment.id && currentAssessment != null" class="an-assessment" >
          <div class="details">
            <p><b>Name: </b>{{assessment.name}}</p>
            <p><b>MRLevel: </b>  {{assessment.targetMRL}}</p>
            <p><b>Target Date: </b> {{assessment.targetDate}}</p>
            <p><b>Scope: </b>{{assessment.scope}}</p>
            <p><b>Location: </b> {{assessment.location}}</p>
            <p><b>Level Switching?: </b>{{assessment.levelSwitching}}</p>
            <p><b>Team Members: </b> </p>
          </div>
          <div class="assNav">
            <button (click)="continueAssessment(assessment.id)">Continue Assessment</button>
            <button (click)="openDashboard(assessment.id)">Dashboard</button>
            <button (click)="openActionItems(assessment.id)">Action Items</button>
            <button (click)="handleDeleting(assessment.id)">Delete</button>
            <!-- <button>Add Team Members</button> -->
          </div>
        </div>
      </div>
      </div>
    </div>

    <div class="assessments shared-assessments">
      <div class="box-title">
        <h3><b>Assessments Shared With Me</b></h3>
      </div>
			<div *ngIf="this.sharedAssessments.length >= 1">
        <div class="accordion-tab metrics">
          <p>You currently have {{sharedAssessments.length}} assessments</p>
        </div>
				<div *ngIf="this.sharedAssessments.length > 0">
      <div  class="an-assessment" *ngFor="let assessment of sharedAssessments">
        <div class="accordion-tab" (click)="expandAssessment($event)">
          <b>Assessment: </b>{{assessment.name}}
        </div>
        <div *ngIf="expand" class="an-assessment">
          <div class="details">
            <p><b>Name: </b>{{assessment.name}}</p>
            <p><b>MRLevel:  </b>{{assessment.targetMRL}}</p>
            <p><b>Target Date: </b>{{assessment.targetDate}}</p>
            <p><b>Scope: </b>{{assessment.scope}}</p>
            <p><b>Location: </b>{{assessment.location}}</p>
            <p><b>Level Switching?: </b>{{assessment.levelSwitching}}</p>
            <p><b>Team Members: </b></p>
          </div>
          <div class="assNav">
            <button (click)="continueAssessment(assessment.id)">Continue Assessment</button>
            <button (click)="openDashboard(assessment.id)">Dashboard</button>
            <button (click)="openActionItems(assessment.id)">Action Items</button>

          </div>
        </div>
			</div> <!-- ng if-->
      </div>
      </div>
    </div>
  </div>

  <!-- <div class="assessment-boxes">
    <div class="assessments user-assessments">
      <div class="box-title">
        <h3>My Assessments</h3>
      </div>
      <div *ngIf="this.assessments">
      <div  *ngFor="let assessment of assessments">
        <div class="accordion-tab" (click)="expandAssessment()">
          Assessment: {{assessment.name}}
        </div>
        <div *ngIf="expand" class="an-assessment">
          <div class="details">
            <p>Name: Assessment 1</p>
            <p>MRLevel:  6</p>
            <p>Target Date: December 24, 2020</p>
            <p>Scope: Scope</p>
            <p>Location: Chicago</p>
            <p>Level Switching?: No</p>
            <p>Team Members: Ray, George</p>
          </div>
          <div class="assNav">
            <button>Open</button>
            <button>Dashboard</button>
            <button>Action Items</button>
          </div>
        </div>
      </div>
      </div>
    </div>

    <div class="assessments shared-assessments">
      <div class="box-title">
        <h3>Shared Assessments</h3>
      </div>
      <div *ngIf="this.assessments">
      <div  class="an-assessment" *ngFor="let assessment of sharedAssessments">
        <div class="accordion-tab" (click)="expandAssessment()">
          Assessment: {{assessment.name}}
        </div>
        <div *ngIf="expand" class="an-assessment">
          <div class="details">
            <p>Name: Assessment 1</p>
            <p>MRLevel:  6</p>
            <p>Target Date: December 24, 2020</p>
            <p>Scope: Scope</p>
            <p>Location: Chicago</p>
            <p>Level Switching?: No</p>
            <p>Team Members: Ray, George</p>
          </div>
          <div class="assNav">
            <button>Open</button>
            <button>Dashboard</button>
            <button>Action Items</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div> -->



</ion-content>
